"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var chai_1 = require("chai");
var mocha_1 = require("mocha");
var spawnSync = require('child_process').spawnSync;
var constants_1 = require("../constants");
var functions_1 = require("../functions");
var urls_1 = require("../../src/urls");
var utils_1 = require("../../src/utils");
mocha_1.describe('Test clasp open function', function () {
    before(functions_1.setup);
    mocha_1.it('should open script correctly', function () {
        var result = spawnSync(constants_1.CLASP, ['open'], { encoding: 'utf8' });
        chai_1.expect(result.stdout).to.contain("Opening script: " + urls_1.URL.SCRIPT(constants_1.SCRIPT_ID));
    });
    mocha_1.it('should error with incorrect scriptId if length < 30', function () {
        var result = spawnSync(constants_1.CLASP, ['open', 'abc123'], { encoding: 'utf8' });
        chai_1.expect(result.stderr).to.contain(utils_1.ERROR.SCRIPT_ID_INCORRECT('abc123'));
        chai_1.expect(result.status).to.equal(1);
    });
    mocha_1.it('open credentials page correctly', function () {
        var result = spawnSync(constants_1.CLASP, ['open', '--creds'], { encoding: 'utf8' });
        chai_1.expect(result.stdout).to.contain(utils_1.LOG.OPEN_CREDS(constants_1.PROJECT_ID));
    });
    mocha_1.it('open credentials page correctly', function () {
        var result = spawnSync(constants_1.CLASP, ['open', '--webapp'], { encoding: 'utf8' });
        chai_1.expect(result.stdout).to.contain('Open which deployment?');
    });
    after(functions_1.cleanup);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3Blbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIm9wZW4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSw2QkFBOEI7QUFDOUIsK0JBQXFDO0FBQzdCLElBQUEsOENBQVMsQ0FBOEI7QUFFL0MsMENBSXNCO0FBRXRCLDBDQUdzQjtBQUV0Qix1Q0FBcUM7QUFDckMseUNBR3lCO0FBRXpCLGdCQUFRLENBQUMsMEJBQTBCLEVBQUU7SUFDbkMsTUFBTSxDQUFDLGlCQUFLLENBQUMsQ0FBQztJQUNkLFVBQUUsQ0FBQyw4QkFBOEIsRUFBRTtRQUNqQyxJQUFNLE1BQU0sR0FBRyxTQUFTLENBQ3RCLGlCQUFLLEVBQUUsQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsQ0FDdEMsQ0FBQztRQUNGLGFBQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxxQkFBbUIsVUFBRyxDQUFDLE1BQU0sQ0FBQyxxQkFBUyxDQUFHLENBQUMsQ0FBQztJQUMvRSxDQUFDLENBQUMsQ0FBQztJQUNILFVBQUUsQ0FBQyxxREFBcUQsRUFBRTtRQUN4RCxJQUFNLE1BQU0sR0FBRyxTQUFTLENBQ3RCLGlCQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsUUFBUSxDQUFDLEVBQUUsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLENBQ2hELENBQUM7UUFDRixhQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsYUFBSyxDQUFDLG1CQUFtQixDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7UUFDdEUsYUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3BDLENBQUMsQ0FBQyxDQUFDO0lBQ0gsVUFBRSxDQUFDLGlDQUFpQyxFQUFFO1FBQ3BDLElBQU0sTUFBTSxHQUFHLFNBQVMsQ0FDdEIsaUJBQUssRUFBRSxDQUFDLE1BQU0sRUFBRSxTQUFTLENBQUMsRUFBRSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsQ0FDakQsQ0FBQztRQUNGLGFBQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxXQUFHLENBQUMsVUFBVSxDQUFDLHNCQUFVLENBQUMsQ0FBQyxDQUFDO0lBQy9ELENBQUMsQ0FBQyxDQUFDO0lBQ0gsVUFBRSxDQUFDLGlDQUFpQyxFQUFFO1FBQ3BDLElBQU0sTUFBTSxHQUFHLFNBQVMsQ0FDdEIsaUJBQUssRUFBRSxDQUFDLE1BQU0sRUFBRSxVQUFVLENBQUMsRUFBRSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsQ0FDbEQsQ0FBQztRQUNGLGFBQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO0lBQzdELENBQUMsQ0FBQyxDQUFDO0lBQ0gsS0FBSyxDQUFDLG1CQUFPLENBQUMsQ0FBQztBQUNqQixDQUFDLENBQUMsQ0FBQyJ9